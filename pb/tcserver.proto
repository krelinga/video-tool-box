syntax = "proto3";

option go_package = "github.com/krelinga/video-tool-box/pb";

message HelloWorldRequest {
    string in = 1;
}

message HelloWorldReply {
    string out = 1;
    int64 file_size = 2;
}

message TranscodeOneFileRequest {
    string in_path = 1;
    string out_path = 2;
}

message TranscodeOneFileReply {
}

message StartAsyncTranscodeRequest {
    // Must be unique among all running transcodes on the server.
    string name = 1;

    string in_path = 2;
    string out_path = 3;
}

message StartAsyncTranscodeReply {
}

message CheckAsyncTranscodeRequest {
    // Must match the name given in StartAsyncTranscodeRequest.
    string name = 1;
}

message CheckAsyncTranscodeReply {
}

service TCServer {
    rpc HelloWorld(HelloWorldRequest) returns (HelloWorldReply) {}

    rpc TranscodeOneFile(TranscodeOneFileRequest) returns (TranscodeOneFileReply) {}

    rpc StartAsyncTrancode(StartAsyncTranscodeRequest) returns (StartAsyncTranscodeReply) {}
    rpc CheckAsyncTranscode(CheckAsyncTranscodeRequest) returns (CheckAsyncTranscodeReply) {}
}
